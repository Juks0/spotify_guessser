# üéµ Spotify Guesser

> Aplikacja webowa do analizy Twoich preferencji muzycznych i zabawy z quizami muzycznymi opartymi o Twoje dane ze Spotify!

![React](https://img.shields.io/badge/React-18.3-blue.svg)
![TypeScript](https://img.shields.io/badge/TypeScript-5.8-blue.svg)
![Vite](https://img.shields.io/badge/Vite-7.1-purple.svg)
![Node.js](https://img.shields.io/badge/Node.js-24.x-green.svg)

---

## üìã Spis Tre≈õci

- [O Projekcie](#-o-projekcie)
- [Funkcjonalno≈õci](#-funkcjonalno≈õci)
- [Tech Stack](#-tech-stack)
- [Struktura Projektu](#-struktura-projektu)
- [Instalacja](#-instalacja)
- [Konfiguracja](#-konfiguracja)
- [Uruchomienie](#-uruchomienie)
- [Deployment](#-deployment)
- [Licencja](#-licencja)

---

## üéØ O Projekcie

**Spotify Guesser** to kompleksowa aplikacja kt√≥ra ≈ÇƒÖczy siƒô z Twoim kontem Spotify, aby:
- üìä Analizowaƒá Twoje nawyki muzyczne
- üé§ Wy≈õwietlaƒá Twoich ulubionych artyst√≥w
- üéµ Pokazywaƒá najpopularniejsze utwory
- üéÆ Organizowaƒá quizy muzyczne z przyjaci√≥≈Çmi w czasie rzeczywistym

Projekt sk≈Çada siƒô z trzech g≈Ç√≥wnych komponent√≥w:
1. **Frontend** - Nowoczesny interfejs u≈ºytkownika (React + Vite)
2. **Backend Auth** - Serwer autoryzacji Spotify (Express)
3. **Socket Server** - Serwer gier multiplayer (Socket.IO)

---

## ‚ú® Funkcjonalno≈õci

### üîê Autoryzacja
- Bezpieczne logowanie przez Spotify OAuth 2.0
- Automatyczne od≈õwie≈ºanie token√≥w
- ZarzƒÖdzanie sesjƒÖ u≈ºytkownika

### üìä Dashboard Muzyczny
- **Top Artists** - Twoi ulubieni arty≈õci (kr√≥tki, ≈õredni i d≈Çugi termin)
- **Top Tracks** - Najpopularniejsze utwory
- **Szczeg√≥≈Çowe Analizy** - Informacje o artystach i utworach
- **Wizualizacje** - Piƒôkne wykresy i statystyki

### üéÆ Quiz Game
- Gry multiplayer w czasie rzeczywistym
- Pytania generowane na podstawie Twoich danych
- System punktacji
- Pokoje gier dla przyjaci√≥≈Ç

### üé® UI/UX
- Dark/Light mode
- Responsywny design
- Animacje i przej≈õcia
- Komponenty UI od shadcn/ui

---

## üõ† Tech Stack

### Frontend
```json
{
  "Framework": "React 18.3",
  "Build Tool": "Vite 7.1",
  "Language": "TypeScript 5.8",
  "Styling": "Tailwind CSS 4.1",
  "UI Components": "Radix UI + shadcn/ui",
  "Routing": "React Router DOM 7",
  "State Management": "React Context + Hooks",
  "Charts": "Recharts",
  "Icons": "Lucide React"
}
```

### Backend
```json
{
  "Runtime": "Node.js 24.x",
  "Server Framework": "Express 5.1",
  "Real-time": "Socket.IO 4.8",
  "Database": "Supabase (PostgreSQL)",
  "Authentication": "Spotify OAuth 2.0",
  "Language": "TypeScript"
}
```

### DevOps & Tools
- **TSX** - TypeScript execution
- **Concurrently** - R√≥wnoleg≈Çe uruchamianie skrypt√≥w
- **ESLint** - Linting kodu
- **Dotenv** - ZarzƒÖdzanie zmiennymi ≈õrodowiskowymi

---

## üìÅ Struktura Projektu (Monorepo)

```
spotify_guessser/
‚îú‚îÄ‚îÄ üìÇ frontend/                # üé® React Application
‚îÇ   ‚îú‚îÄ‚îÄ üìÇ src/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ üìÇ components/      # Komponenty React
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ üìÇ ui/          # shadcn/ui components
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ TopArtists.tsx
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ TopTracks.tsx
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ QuizGame.tsx
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ ...
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ üìÇ contexts/        # React Contexts
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ üìÇ assets/          # Static assets
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ App.tsx             # Main component
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ main.tsx            # Entry point
‚îÇ   ‚îú‚îÄ‚îÄ üìÇ public/              # Static files
‚îÇ   ‚îú‚îÄ‚îÄ vite.config.ts          # Vite config
‚îÇ   ‚îú‚îÄ‚îÄ package.json            # Frontend dependencies
‚îÇ   ‚îî‚îÄ‚îÄ README.md               # Frontend docs
‚îÇ
‚îú‚îÄ‚îÄ üìÇ backend/                 # üîß Node.js Servers
‚îÇ   ‚îú‚îÄ‚îÄ üìÇ src/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ üìÇ auth/            # Spotify OAuth server
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ authorize.ts
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ üìÇ server/          # Socket.IO server
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ server.ts
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ üìÇ database/        # Supabase client
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ supabase.ts
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ services.ts
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ üìÇ routers/         # API routes
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ üìÇ config/          # Configuration
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ üìÇ scripts/         # Utility scripts
‚îÇ   ‚îú‚îÄ‚îÄ package.json            # Backend dependencies
‚îÇ   ‚îî‚îÄ‚îÄ README.md               # Backend docs
‚îÇ
‚îú‚îÄ‚îÄ üìÑ .env                     # Environment variables (shared)
‚îú‚îÄ‚îÄ üìÑ package.json             # Workspace root
‚îú‚îÄ‚îÄ üìÑ README.md                # This file
‚îî‚îÄ‚îÄ üìÑ MIGRATION_GUIDE.md       # Migration instructions
```

> **üí° Projekt jest zorganizowany jako monorepo** z oddzielnymi folderami dla frontendu i backendu, co u≈Çatwia development i deployment.

---

## üöÄ Instalacja

### Wymagania
- **Node.js** >= 24.0.0
- **npm** lub **yarn**
- **Konto Spotify Developer** (dla API keys)
- **Konto Supabase** (dla bazy danych)

### Krok 1: Klonowanie repozytorium
```bash
# Klonuj projekt
git clone <repository-url>
cd spotify_guessser
```

### Krok 2: Instalacja zale≈ºno≈õci
```bash
# Zainstaluj wszystkie pakiety (root + frontend + backend)
npm install

# Lub osobno:
cd frontend && npm install
cd ../backend && npm install
```

### Krok 3: Generowanie certyfikat√≥w SSL (tylko dla development)
```bash
# Wygeneruj self-signed SSL certificate dla lokalnego HTTPS
openssl req -x509 -newkey rsa:4096 -keyout private.key -out certificate.crt -days 365 -nodes -subj "/CN=192.168.0.93" -addext "subjectAltName=IP:192.168.0.93,DNS:localhost"
```

> **Uwaga:** Zamie≈Ñ `192.168.0.93` na sw√≥j lokalny adres IP

---

## ‚öôÔ∏è Konfiguracja

### Krok 1: Spotify Developer App

1. Wejd≈∫ na [Spotify Developer Dashboard](https://developer.spotify.com/dashboard)
2. Utw√≥rz nowƒÖ aplikacjƒô
3. Dodaj Redirect URIs:
   ```
   https://localhost:8888/callback
   https://192.168.0.93:8888/callback
   ```
4. Skopiuj **Client ID** i **Client Secret**

### Krok 2: Supabase Setup

1. Utw√≥rz projekt na [Supabase](https://supabase.com)
2. Skopiuj URL projektu i API keys
3. Uruchom SQL queries z pliku `database inster query` aby stworzyƒá tabele

### Krok 3: Plik .env

Utw√≥rz plik `.env` w g≈Ç√≥wnym katalogu:

```bash
# ============================================
# üéµ SPOTIFY API CREDENTIALS
# ============================================
SPOTIFY_CLIENT_ID=your_spotify_client_id_here
SPOTIFY_CLIENT_SECRET=your_spotify_client_secret_here
VITE_SPOTIFY_CLIENT_ID=your_spotify_client_id_here
VITE_SPOTIFY_CLIENT_SECRET=your_spotify_client_secret_here

# ============================================
# üóÑÔ∏è SUPABASE DATABASE
# ============================================
SUPABASE_URL=https://your-project.supabase.co
SUPABASE_ANON_KEY=your_anon_key_here
SUPABASE_SERVICE_KEY=your_service_key_here
VITE_SUPABASE_URL=https://your-project.supabase.co
DATABASE_URL=postgresql://postgres:[PASSWORD]@db.[PROJECT].supabase.co:5432/postgres

# ============================================
# üåê DEVELOPMENT URLS (localhost lub local IP)
# ============================================
VITE_FRONTEND_URL=https://192.168.0.93:5173
VITE_BACKEND_URL=https://192.168.0.93:8888
VITE_SERVER_BACKEND_URL=https://192.168.0.93:3001

FRONTEND_URL=https://192.168.0.93:5173
BACKEND_URL=https://192.168.0.93:8888
SERVER_BACKEND_URL=https://192.168.0.93:3001

# ============================================
# ‚öôÔ∏è OTHER SETTINGS
# ============================================
NODE_ENV=development
AUTH_PORT=8888
```

> **üí° Tip:** Zamie≈Ñ `192.168.0.93` na sw√≥j lokalny adres IP (sprawd≈∫ przez `ipconfig` lub `ifconfig`)

---

## üé¨ Uruchomienie

### Development Mode - Z g≈Ç√≥wnego katalogu (Monorepo)

```bash
# Uruchamia frontend + backend razem
npm run dev
```

To uruchomi:
- ‚úÖ Frontend na `https://192.168.0.93:5173`
- ‚úÖ Backend Auth na `https://192.168.0.93:8888`
- ‚úÖ Socket Server na `https://192.168.0.93:3001`
- ‚úÖ Database check script

### Uruchamianie osobno

```bash
# Z root directory:
npm run dev:frontend   # Tylko frontend
npm run dev:backend    # Tylko backend (auth + socket + db check)

# Lub wejd≈∫ do konkretnego folderu:
cd frontend && npm run dev      # Vite dev server
cd backend && npm run dev       # Wszystkie backend serwery
cd backend && npm run dev:auth  # Tylko auth server
cd backend && npm run dev:socket # Tylko socket server
```

### Akceptowanie SSL Certyfikat√≥w

Po pierwszym uruchomieniu odwied≈∫ w przeglƒÖdarce i zaakceptuj self-signed certyfikaty:
1. `https://192.168.0.93:5173` (Frontend)
2. `https://192.168.0.93:8888` (Backend Auth)
3. `https://192.168.0.93:3001` (Socket Server)

---

## üì¶ Deployment

### Build dla Produkcji

```bash
# Build frontend + backend (z root)
npm run build

# Lub osobno:
npm run build:frontend  # Build frontend (production config)
npm run build:backend   # Compile backend TypeScript

# Lub wejd≈∫ do folderu:
cd frontend && npm run build:prod  # -> frontend/dist/
cd backend && npm run build        # -> backend/dist/
```

### Deployment Options

#### Option 1: Frontend na FTP/Static Hosting
1. Uruchom `npm run build:prod`
2. Upload zawarto≈õci folderu `dist/` na serwer FTP
3. Backend musi byƒá hostowany osobno (np. VPS, Heroku, Railway)

#### Option 2: Full Stack Deployment
Potrzebujesz hostingu z Node.js:
- **Vercel** / **Netlify** - Frontend
- **Railway** / **Render** / **Heroku** - Backend
- **Supabase** - Database (ju≈º w chmurze)

#### Option 3: VPS (pe≈Çna kontrola)
Deploy ca≈Çej aplikacji na VPS (np. DigitalOcean, AWS EC2):
1. Zainstaluj Node.js na serwerze
2. Sklonuj repo
3. Zainstaluj zale≈ºno≈õci
4. Setup NGINX jako reverse proxy
5. U≈ºyj PM2 do zarzƒÖdzania procesami
6. Certyfikaty SSL z Let's Encrypt

### Zmienne ≈örodowiskowe dla Produkcji

W produkcji zmie≈Ñ wszystkie URL na swoje domeny:
```bash
VITE_FRONTEND_URL=https://yourdomain.com
VITE_BACKEND_URL=https://api.yourdomain.com
NODE_ENV=production
```

---

## üîí Bezpiecze≈Ñstwo

### Development
- ‚úÖ Self-signed SSL certificates
- ‚úÖ CORS w≈ÇƒÖczone dla localhost
- ‚úÖ Cookies: `sameSite: 'lax'`

### Production
- ‚úÖ Prawdziwe SSL certificates (Let's Encrypt)
- ‚úÖ CORS ograniczony do twojej domeny
- ‚úÖ Cookies: `httpOnly: true, secure: true, sameSite: 'strict'`
- ‚úÖ Zmienne ≈õrodowiskowe w `.env` (nie commituj do git!)
- ‚úÖ Rate limiting na endpointach API

---

## üêõ Troubleshooting

### Problem: "Certificate error" w przeglƒÖdarce
**RozwiƒÖzanie:** Odwied≈∫ ka≈ºdy port (5173, 8888, 3001) i zaakceptuj certyfikat

### Problem: "Failed to connect to database"
**RozwiƒÖzanie:** Sprawd≈∫ `DATABASE_URL` w `.env` i upewnij siƒô ≈ºe Supabase projekt dzia≈Ça

### Problem: "CORS error"
**RozwiƒÖzanie:** Upewnij siƒô ≈ºe `FRONTEND_URL` i `BACKEND_URL` sƒÖ prawid≈Çowe

### Problem: Porty zajƒôte
**RozwiƒÖzanie:** 
```bash
# Znajd≈∫ procesy na portach
lsof -i :5173
lsof -i :8888
lsof -i :3001

# Zabij proces
kill -9 <PID>
```

---

## üìù Skrypty NPM

### Root Directory (Workspace)

| Komenda | Opis |
|---------|------|
| `npm run dev` | Uruchom frontend + backend razem |
| `npm run dev:frontend` | Tylko frontend |
| `npm run dev:backend` | Tylko backend (wszystko) |
| `npm run build` | Build frontend + backend |
| `npm run build:frontend` | Build tylko frontend |
| `npm run build:backend` | Build tylko backend |

### Frontend (`cd frontend/`)

| Komenda | Opis |
|---------|------|
| `npm run dev` | Vite dev server (5173) |
| `npm run build:prod` | Production build |
| `npm run preview` | Preview build |
| `npm run lint` | ESLint check |

### Backend (`cd backend/`)

| Komenda | Opis |
|---------|------|
| `npm run dev` | Auth + Socket + DB check |
| `npm run dev:auth` | Tylko auth (8888) |
| `npm run dev:socket` | Tylko socket (3001) |
| `npm run db:check` | Check database |
| `npm run build` | Compile TypeScript |

---

## ü§ù Contributing

Pull requesty sƒÖ mile widziane! Dla wiƒôkszych zmian, najpierw otw√≥rz issue aby przedyskutowaƒá co chcesz zmieniƒá.

---

## üìÑ Licencja

MIT License - mo≈ºesz robiƒá z tym projektem co chcesz!

---

## üë®‚Äçüíª Autor

Stworzony z ‚ù§Ô∏è przez Kacpra

---

## üôè Podziƒôkowania

- [Spotify Web API](https://developer.spotify.com/documentation/web-api)
- [Supabase](https://supabase.com)
- [shadcn/ui](https://ui.shadcn.com)
- [Vite](https://vitejs.dev)
- [React](https://react.dev)

---

### üì± Screenshots

_// TODO: Dodaj screenshoty aplikacji_

---

**Mi≈Çej zabawy z analizƒÖ swojej muzyki! üéµ‚ú®**
